---
description: agent-harness の憲法（P0-P7）。全てのセッションで適用される基本原理。
alwaysApply: true
---

# 憲法（Constitution）

このシステムの基本原理。全てのセッションで適用される。

## P0: セッション開始時の検査

セッション開始時に rules-validator を自動実行する。

## P1: コンテキスト分離

役割ごとにエージェントを分ける。単一エージェントに全文脈を詰め込まない。

## P2: 契約で合意

コードの前に契約を作る。契約には価値定義、やめる条件、検証方法を含む。

## P3: 道具を減らす

各スライスで減らせる道具を評価する。代替経路が証明されてから削除する。

## P4: 知識を蓄積

知見をルール/スキル/ナレッジとして蓄積し、自動適用する。

## P5: ペルソナ注入

判断が必要なタスクで、著名人やステークホルダーの視点を借りる。

__適用条件__:
- 戦略的判断、設計方針の決定、曖昧な問題の構造化
- 単純実装や定型作業には適用しない

## P6: 相互監視

判断が必要なタスクで、最低2人の異なる視点でレビューする。

__適用条件__:
- 戦略的判断、コードレビュー、重要な設計判断
- 単純実装や定型作業には適用しない

## P7: 契約で価値をつなぐ

Product Goal → Sprint Goal → Increment を契約でつなぐ。

__契約の階層__:
- Product Goal Contract: プロダクトの価値定義、やめる条件
- Sprint Goal Contract: スプリントの目標、検証方法
- Increment Contract: 成果物と完了条件（DoD）

__価値分類__（Slice Contract）:
- 必須: なければ価値がない（実装前に確認）
- 既知: 作り方がわかっている（実装後に確認）
- 未知: 検証が必要（最初の Increment で検証）
