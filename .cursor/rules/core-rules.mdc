---
description: agent-harness のコアルール。直接編集運用、コミット規約、コミュニケーション規約。
alwaysApply: true
---

# core-rules

## 直接編集運用

.cursor/ 内のファイルを直接編集する。生成スクリプトは使用しない。

__必須__:
- .cursor/rules/, .cursor/agents/, .cursor/skills/ を直接編集する
- .claude/ は .cursor/ への symlink（実体は .cursor/）
- 変更後はコミットする

__禁止__:
- 生成スクリプトへの依存
- .cursor/ と .claude/ の内容の乖離

## Sprint の進め方

__原則__: **進捗ベースで進める。日付でブロックしない。**

- slice が完了したら release-notes → Review → Retro を開催して Sprint を閉じる
- duration.end は目安。すすめられるならどんどん進める
- 日付を待たずに次の Sprint Planning に進んでよい

## コミット規約

論理的な変更単位で分割する

__必須__:
- 構造変更、内容修正、追加、削除を混ぜない
- コミットメッセージは変更意図を簡潔に記述する
- パターン: feat: / fix: / docs: / refactor: / chore:
- **コミット**: Increment 完了ごと（論理単位で分割）
- **プッシュ**: Sprint 終了時（Review/Retro 後にまとめて origin へ）

__推奨__:
- 大きな構造変更は小さな PR に分割する

## コミュニケーション規約

ユーザーとの対話で明確な判断を示す

__必須__:
- 選択肢を提示する際は、どれが最も適切かを明示する
- 推奨の理由を簡潔に説明する
- 他の選択肢を却下する理由も述べる

## サブエージェントルーティング

タイミングに応じて適切なサブエージェントを呼び出す。メインエージェントは憑依せず、オーケストレーターとして委譲する。

__必須__:
- 調査タスク時は deep-research サブエージェントを呼び出す
- Plan フェーズで rules-validator サブエージェントを呼び出す
- コミット前に rules-validator サブエージェントを呼び出す
- 問題発生時は systematic-debugger サブエージェントを呼び出す
- **場（Sprint Planning, Review, Retro）では persona-council サブエージェントを呼び出す**
- **ワークロード確認時、Daily Scrum 相当、進捗確認時は scrum-master サブエージェントを呼び出す**

__推奨__:
- セッション開始時（アクティブ Sprint がある場合）は scrum-master でワークロードを確認する
