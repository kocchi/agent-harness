---
name: propose-change
description: 変更提案フローを実行する（中間生成物での合意を重視）
---

# 変更提案フロー

このリポジトリに変更を加える際の標準フロー。
__Human-in-the-Loop を徹底し、中間生成物で合意する。__

## フロー

```
1. 調査 → 2. 中間生成物で合意 → 3. 実装 → 4. コミット前レビュー → 5. コミット
```

### 1. 調査（deep-research）

変更の根拠となる情報を収集:
- 公式ドキュメント
- ベストプラクティス
- 影響範囲

### 2. 中間生成物で合意（必須）

__コードを書く前に__、以下をユーザーに提示し承認を得る:

| 中間生成物 | 内容 | 参照 |
|------------|------|------|
| __契約__ | 何を作るか（スコープ、DoD） | increment-contract または slice-contract |
| __失敗モード__ | 何が壊れうるか（リスク、対策） | slice-contract の risks |
| __テスト戦略__ | どう検証するか（成功条件） | increment-contract の verification |

**注**: 契約系スキル（increment, slice）を使っている場合、そちらの contract が「中間生成物」になる。
propose-change は契約作成後の「実装フロー」を担う。

#### テンプレート（契約がない場合）

```markdown
## 中間生成物

### 契約（何を作るか）
- 変更内容: ...
- 変更ファイル: ...
- DoD: ...

### 失敗モード（何が壊れうるか）
| リスク | 対策 |
|--------|------|
| ... | ... |

### テスト戦略（どう検証するか）
- 成功条件: ...
- 検証方法: ...

---
この方針で進めて良いか？
```

### 3. 実装

承認後:
1. source/ を編集
2. ./scripts/generate.sh 実行
3. ssot-validator で整合性確認

### 4. コミット前レビュー（必須）

__コミットする前に__、以下をユーザーに提示:

```markdown
## コミット前レビュー

### 変更サマリ
- 追加: ...
- 変更: ...
- 削除: ...

### 中間生成物との整合
- 契約通りか: Yes/No
- 失敗モード対策済みか: Yes/No

---
コミットして良いか？
```

### 5. コミット

ユーザー承認後にコミット。

## 参照

- [research/references/superpowers-knowhow.md](../../../research/references/superpowers-knowhow.md) - 実装計画の bite-sized タスク（Writing Plans ノウハウ）
